<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Express</title>
<link rel="stylesheet" href="static/css/style.css">
</head>
<body>
<div class="page">
	<h1><a href="" class="logo"><img src="static/images/01.jpeg"></a></h1>
	<h3>express</h3>


	<ul>
		<li v-for="item in type">
			<span>{{ item.name }}</span>
			<a href="javascript:;" @click="delCar(item.name)">删除</a>
		</li>
	</ul>

	
	<div class="clearfix">
		<input type="text" v-model.trim="name" @keyup.enter="addCar">
		<button @click="addCar">添加汽车</button>
	</div>


</div>
<script src="https://cdn.bootcss.com/zepto/1.2.0/zepto.min.js"></script>
<script src="https://cdn.bootcss.com/vue/2.5.3/vue.min.js"></script>
<script src="static/js/init.js"></script>
<script>

new Vue({
	el : '.page',
	data : {
		type:[],
		list:[],
		name:''
	},
	methods:{
		addCar:function(){
			var _self = this;
			if ( this.name ) {
				$.post('/api/cars/addCar',{name:this.name},function(data){
					_self.getList()
				})
			}
		},
		delCar:function(val){
			var _self = this;
			$.post('/api/cars/delCar',{name:val},function(data){
				_self.getList()
			})
		},
		getList:function(){
			var _self = this;
			$.post('/api/cars/list',function(data){
				if ( data.code == 0 ) {
					_self.type = data.list
				}	
			})
		}
	},
	mounted(){
		this.getList()
	}
})
	
</script>
</body>
</html>